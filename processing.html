<!--  	Student ID: 1060325
		Student Name: Danielle Walker
		Subject: COS30020 - Web Application Development
		Assignment - Assignment 2
		
		File: processing.html - The Manager Processing page.  From here the Manager 'processes' the data in the XML
-->

<!DOCTYPE html >
<html lang="en">
<head>
<meta charset="utf-8"/>
<m<meta name="Keywords" content="Buy Online"/>
<meta name="Description" content="Buy Online" />
<meta name="Author" content="Danielle Walker" />
<title>Buy Online - Manager Login</title>

<link href="styles.css" rel = "stylesheet" type="text/css" />
<link href="Smooth_menu.css" rel="stylesheet" type="text/css" />

<script src="jscookies.js" type="text/javascript"></script>

</head>

<script type="text/javascript">
	var xHRObject = false;
		
	if (window.XMLHttpRequest)
	{ 
		xHRObject = new XMLHttpRequest();
	}
	else if (window.ActiveXObject)
	{ 
		xHRObject = new ActiveXObject("Microsoft.XMLHTTP");
	}
	
	function Transform()
	{
		xHRObject.open("GET", "processing.php?id=" + Number(new Date()), true);
		xHRObject.onreadystatechange = getData;
		xHRObject.send(null);
	}
	
	function getData()
	{
		if ((xHRObject.readyState == 4) && (xHRObject.status == 200))
		{
			var spantag = document.getElementById("result").innerHTML = xHRObject.responseText;
			var CurrUser = document.getElementById("curruser").innerHTML = "Currently Logged On User: " + getCookie("username");
		}
	}
	
	function Process()
	{
		var xHRObject = false;
		if (window.XMLHttpRequest) xHRObject = new XMLHttpRequest();
		else if (window.ActiveXObject) xHRObject = new ActiveXObject("Microsoft.XMLHTTP");
		
		xHRObject.open("GET", "processing2.php?id=" +  Number(new Date), true);
		xHRObject.onreadystatechange = function() 
		{
			if (xHRObject.readyState == 4 && xHRObject.status == 200) {
				AjaxResult = xHRObject.responseText;
				if (AjaxResult == "Error") {
					//alert("Sorry, this item is not available for sale");
				} else {
					var spantag = document.getElementById("result").innerHTML = xHRObject.responseText;
				}
			}
		}	
		xHRObject.send(null);
	}
			
</script>

<body id="home" onload="Transform()">

<div id="header_wrapper">
    <div id="header">
	    <div id="site_title"></div>
			<div id="Main_menu" class="smooth_menu">	
				<ul>
					<li><a id="menu1" href="logout.html">Logout</a></li>
					<li><a id="menu2" href=#></a></li>
					<li><a id="menu3" href="processing.html">Processing</a></li> 
					<li><a id="menu4" href="listing.html">Listing</a></li>
				</ul>
			<br style="clear: left" />
        </div> 
	</div> 
</div>

<p id = "curruser"></p>
	
<div id="main_layout">	
    <div class="main_text float_1">
		 <h1>Processing Form</h1>
		 <br />
		 <span id="result"> </span>
	</div>
</div>
 
</body>
</html>